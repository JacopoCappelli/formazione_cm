- name: Avvia il container Jenkins con accesso a Podman
  containers.podman.podman_container:
    name: "{{ container_name }}"
    image: "{{ container_image }}"
    state: started
    restart_policy: unless-stopped
    pull: true
    ports:
      - "{{ port_to_expose }}:{{ port_to_expose }}"
      - "{{ agent_port }}:{{ agent_port }}"
    volumes:
      - "/var/run/podman.sock:/var/run/podman.sock"  
      - "/usr/bin/podman:/usr/bin/podman"
      - "jenkins_home:/var/jenkins_home"
    user: root 
